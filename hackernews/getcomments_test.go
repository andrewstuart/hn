package hackernews

import (
	"compress/gzip"
	"fmt"
	"net/http"
	"net/http/httptest"
	"testing"
)

func TestGetComments(t *testing.T) {
	ts := httptest.NewServer(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		gw := gzip.NewWriter(w)
		defer gw.Close()

		switch r.Method {
		case "HEAD":
			w.Header().Set("Set-Cookie", "__cfduid=123")
			fmt.Fprintln(gw)
			break
		case "GET":
			fmt.Fprintln(gw, commentResult)
		}
	}))
	defer ts.Close()

	c := NewClient(ts.URL)

	a := &Article{
		Id:       9050970,
		Comments: make([]*Comment, 0, 10),
	}

	c.GetComments(a)

	if len(a.Comments) != 29 {
		t.Fatalf("Wrong number of comments returned: %d", len(a.Comments))
	}

	if len(a.Comments[0].Comments) != 10 {
		t.Fatalf("Wrong number of comments for nested comment 0: %d", len(a.Comments[0].Comments))
	}

	if a.Comments[0].Text[:1] != ">" {
		t.Errorf("Error html escaping comments, should begin with >: %s", a.Comments[0].Text)
	}
}

const commentResult = `<html><head><meta name="referrer" content="origin"></meta><link rel="stylesheet" type="text/css" href="news.css?iR71jv9Cret6gTOnjGIS"></link><link rel="shortcut icon" href="favicon.ico"></link><script type="text/javascript">
function byId(id) {
  return document.getElementById(id);
}

function vote(node) {
  var v = node.id.split(/_/);   // {'up', '123'}
  var item = v[1];

  // hide arrows
  byId('up_'   + item).style.visibility = 'hidden';
  byId('down_' + item).style.visibility = 'hidden';

  // ping server
  var ping = new Image();
  ping.src = node.href;

  return false; // cancel browser nav
} </script><title>Show HN: A Unixy approach to WebSockets | Hacker News</title></head><body><center><table id="hnmain" op="item" border="0" cellpadding="0" cellspacing="0" width="85%" bgcolor="#f6f6ef"><tr><td bgcolor="#ff6600"><table border="0" cellpadding="0" cellspacing="0" width="100%" style="padding:2px"><tr><td style="width:18px;padding-right:4px"><a href="http://www.ycombinator.com"><img src="y18.gif" width="18" height="18" style="border:1px #ffffff solid;"></img></a></td><td style="line-height:12pt; height:10px;"><span class="pagetop"><b><a href="news">Hacker News</a></b><img src="s.gif" height="1" width="10"><a href="newest">new</a> | <a href="newcomments">comments</a> | <a href="show">show</a> | <a href="ask">ask</a> | <a href="jobs">jobs</a> | <a href="submit">submit</a></span></td><td style="text-align:right;padding-right:4px;"><span class="pagetop"><a href="login?goto=item%3Fid%3D9050970">login</a></span></td></tr></table></td></tr><tr style="height:10px"></tr><tr><td><table border="0"><tr><td><center><a id="up_9050970" href="vote?for=9050970&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9050970"></span></center></td><td class="title"><span class="deadmark"></span><a href="http://websocketd.com/">Show HN: A Unixy approach to WebSockets</a><span class="sitebit comhead"> (websocketd.com)</span></td></tr><tr><td colspan="1"></td><td class="subtext"><span class="score" id="score_9050970">390 points</span> by <a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9050970">23 hours ago</a>  | <a href="item?id=9050970">121 comments</a></td></tr><tr style="height:10px"></tr><tr><td></td><td><form method="post" action="comment"><input type="hidden" name="parent" value="9050970"><input type="hidden" name="goto" value="item?id=9050970"><input type="hidden" name="hmac" value="d279d5b355316bb74cd8ae6565b2532a39952ad4"><textarea name="text" rows="6" cols="60" style="" placeholder=""></textarea><br><br>
<input type="submit" value="add comment"></form></td></tr></table><br><br>
<table border="0"><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051402" href="vote?for=9051402&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051402"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=jeremiep">jeremiep</a> <a href="item?id=9051402">20 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">&gt; Write programs to handle text streams, because that is a universal interface.<p>I always hated that part of UNIX. It would be so much better if programs could handle data-structure streams instead. Having text streams causes every single program to implement ad-hoc parsers and serializers.<p>I now use the command-line only for trivial one-time actions. For everything else I&#x27;ll use a scripting language and forget about reading and writing text streams altogether.</font></span><p><font size="1"><u><a href="reply?id=9051402&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9052100" href="vote?for=9052100&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052100"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=xorcist">xorcist</a> <a href="item?id=9052100">12 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">The answer is probably the same as why powershell isn&#x27;t as usable as a unix shell is. Which in turn has a lot to do with why we&#x27;re still programming text files and not clicking fancy objects, despite it is seemingly a more powerful system and the many projects which tried to take advantage of that.<p>Text is a useful common denominator. Text is possible to version control, tie to bug trackers, and handle with configuration management systems.<p>The same is true for the command line. If you handle structured data, or objects, you communicate using APIs. While it&#x27;s not theoretically impossible to still use version control and configuration management, it turns out that it&#x27;s much more difficult in practice. Plain text is a useful lowest common denominator.</font></span><p><font size="1"><u><a href="reply?id=9052100&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9052537" href="vote?for=9052537&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052537"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=jeremiep">jeremiep</a> <a href="item?id=9052537">8 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">We&#x27;re already creating ad-hoc APIs using cut, sed and awk and grep (to name a but a few) all the time in order to massage the data into a format the next program in the chain will understand. This sometimes involves non-trivial invocation chains, I always feel like I&#x27;m working on a representation of the data rather than the data itself.<p>I would much rather have functional primitives (map, filter, reduce, zip, take, drop, etc) doing this work.</font></span><p><font size="1"><u><a href="reply?id=9052537&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051644" href="vote?for=9051644&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051644"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=barrkel">barrkel</a> <a href="item?id=9051644">18 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">It would seem to be better in theory, but I don&#x27;t think it&#x27;s much better in practice. I could never get on with PowerShell, though that&#x27;s a further step beyond what you suggest - not just structured streams, but object streams.<p>It&#x27;s like the difference between static and dynamic typing. Solving the type system&#x27;s constraints adds complexity over and above the irreducible complexity of the problem. Static typing pays for its added complexity by proving certain things about the code, but for ad-hoc, short-lived code it usually isn&#x27;t worth it. And most code (by frequency, if not by importance) using streams is ad-hoc, on the command line.<p>With a structured stream, there are only a handful of generic utilities that make sense: map, filter, reduce, etc. (and they better have a good lambda syntax). Whereas the advantage of unstructured streams is that utilities that were never designed to work together can be made to do so, usually with relatively little effort.<p>For example, suppose you have a bunch of pid files in a directory, and you want to send all the associated processes a signal. What kind of data structure stream does your signal sending program accept? What needs to be done to a bare number to convert it into the correct format? How do you re-structure plain text from individual files? Structure in streams seems to have suddenly added a whole lot of complexity and work, and for what?<p>Whereas:<p><pre><code>    cat $pid_directory&#x2F;*.pid | xargs kill -USR1
</code></pre>
(I don&#x27;t really see how a scripting language solves your issue. You still need to parse the output and format the input of all the tools you exec from your scripting language. Or maybe you&#x27;re not actually using tools written in lots of different languages? Because this is one of my main use cases for the shell using streams: gluing focused programs together without constraint on implementation language.)</font></span><p><font size="1"><u><a href="reply?id=9051644&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051903" href="vote?for=9051903&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051903"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=sjolsen">sjolsen</a> <a href="item?id=9051903">15 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">&gt;For example, suppose you have a bunch of pid files in a directory, and you want to send all the associated processes a signal. What kind of data structure stream does your signal sending program accept?<p>What program? A single line of shell code would work fine. Kill itself only need take a pid, or an actual handle if Unix had sich a thing.<p>&gt;What needs to be done to a bare number to convert it into the correct format?<p>If a &quot;bare number&quot; isn&#x27;t the correct format, why would you have them at all?<p>&gt;How do you re-structure plain text from individual files?<p>The whole idea is not to use plain text at all.<p>&gt;Structure in streams seems to have suddenly added a whole lot of complexity and work, and for what?<p>Structuring your data doesn&#x27;t add complexity; when you consider the hoops one jumps through to strip data of its structure at one end of a stream and reconstitute it at the other, it&#x27;s really reducing it. It&#x27;s only if you insist on <i>also</i> using unstructured representations that complexity is increased.<p>Of course, as long as Unixes and their shells only speak bytestreams and leave all structuring, even of program arguments, to individual programs, it&#x27;s a moot point. He&#x27;s still right aboutnit being a shitty design, though.</font></span><p><font size="1"><u><a href="reply?id=9051903&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9052186" href="vote?for=9052186&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052186"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=nailer">nailer</a> <a href="item?id=9052186">11 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">&gt; When you consider the hoops one jumps through to strip data of its structure at one end of a stream and reconstitute it at the other, structured data is really reducing complexity.<p>Exactly this. I think HN doesn&#x27;t have much experience with powershell, which is why you&#x27;re currently being downvoted. So let&#x27;s have a practical example: consider killing processes run in the last 5 mins using posh:<p>ps someprocess |
where { $_.StartTime -and (Get-Date).AddMinutes(-5) -gt $_.StartTime } | kill<p>Now try the same on bash, and spend time creating a regex to extract time from the unstructured output of Unix ps.</font></span><p><font size="1"><u><a href="reply?id=9052186&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="160"></td><td valign="top"><center><a id="up_9052335" href="vote?for=9052335&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052335"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=lawl">lawl</a> <a href="item?id=9052335">10 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">kill ` + "`" + `ps -eo pid,etime | grep -P &#x27; (00|01|02|03|04):..$&#x27; | cut -d &quot; &quot; -f 1` + "`" + `<p>Not really a complex regexp thogh. I almost exclusively use Linux and thus bash&#x2F;zsh etc. And yes, my piece above looks uglier and like but of a hack, but that&#x27;s not the point. It&#x27;s easy because it&#x27;s discoverable. These are one-liners you write ad hoc and use once. But powershell in my experience lacks the discoverability that bash has, you can&#x27;t look at what some tool outputs and then know how to parse it, you need to look at the underlying object first. Granted I have maybe one day of experience with PowerShell, but I don&#x27;t know anyone who uses it for their primary interaction with the Computer. For Bash though...<p>(And yes I&#x27;m aware that you can also create huge complicated bash scripts, but you could also just use python)<p>Find the name of the CPU using powershell and have fun looking up the correct WMI class and what property you need.<p>Here&#x27;s bash: grep name &#x2F;proc&#x2F;cpuinfo</font></span><p><font size="1"><u><a href="reply?id=9052335&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="200"></td><td valign="top"><center><a id="up_9052503" href="vote?for=9052503&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052503"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=nailer">nailer</a> <a href="item?id=9052503">8 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">&gt; my piece above looks uglier and like but of a hack, but that&#x27;s not the point.<p>Well it was precisely my point.<p>get-wmiinfo seems pretty discoverable to me. You can browse the output and pick what you want.</font></span><p><font size="1"><u><a href="reply?id=9052503&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051905" href="vote?for=9051905&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051905"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=swhipple"><font color="#3c963c">swhipple</font></a> <a href="item?id=9051905">15 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000"><i>Structure in streams seems to have suddenly added a whole lot of complexity and work, and for what?</i><p>Being able to stream a collections of bytes (and collections of collections of bytes, recursively) is one case that I find myself wanting when sending data between programs at the command line.<p>Consider:<p><pre><code>  ls &quot;$pid_directory&quot; | xargs rm
</code></pre>
This, of course, has problems for some inputs because ls is sending a single stream and xargs is trying to re-parse it into a collection on which to use rm.<p>If there were some way to encode items in a collection OOB, you could pipe data through programs while getting some guarantees about it being represented correctly in the recipient program.  (Sometimes you see scripts that do this by separating data in a stream with NUL delimiters, but this doesn&#x27;t work recursively or if your main data stream might have NUL in it.)</font></span><p><font size="1"><u><a href="reply?id=9051905&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9052348" href="vote?for=9052348&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052348"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=ackalker">ackalker</a> <a href="item?id=9052348">10 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">&gt;Being able to stream a collections of bytes (and collections of collections of bytes, recursively) is one case that I find myself wanting when sending data between programs at the command line.<p>If you don&#x27;t mind using JSON as intermediary format, you might like to have a look at jq: <a href="http://stedolan.github.io/jq/" rel="nofollow">http:&#x2F;&#x2F;stedolan.github.io&#x2F;jq&#x2F;</a><p>jq can also convert raw (binary) data to JSON objects containing strings (and vice versa) for further processing.
Naturally, jq filters can be pipelined in many useful ways.</font></span><p><font size="1"><u><a href="reply?id=9052348&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="160"></td><td valign="top"><center><a id="up_9052689" href="vote?for=9052689&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052689"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=Freaky">Freaky</a> <a href="item?id=9052689">7 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">There&#x27;s work ongoing on FreeBSD to add libxo support to tools in the base system, which will allow you to get (amongst others) JSON out of various commands: <a href="https://github.com/Juniper/libxo" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;Juniper&#x2F;libxo</a></font></span><p><font size="1"><u><a href="reply?id=9052689&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051480" href="vote?for=9051480&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051480"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=ayani">ayani</a> <a href="item?id=9051480">20 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">The .NET shell does this, but that&#x27;s why it&#x27;s not Unix, and it&#x27;s not universal.<p>If programs passed data structures then either you&#x27;re forcing a certain data structure model (i.e. it&#x27;s not universal, because it&#x27;s not compatible with anything else), or your data structures are so general (i.e. a block stream) that your applications are going to be parsing anyway... and that&#x27;s going to be even nastier than if everything was stupid text steams in the first place.</font></span><p><font size="1"><u><a href="reply?id=9051480&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9052526" href="vote?for=9052526&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052526"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=jeremiep">jeremiep</a> <a href="item?id=9052526">8 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Programs already need to have their input in the proper format in order to parse them. I&#x27;d like the mismatch error to be from the invocation of the program rather than halfway down the parsing.<p>For this to work data structures would have to be nothing more than scalars, sequences and mappings without specific concrete types. Just like JSON, YAML, and the rest do it now.</font></span><p><font size="1"><u><a href="reply?id=9052526&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051470" href="vote?for=9051470&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051470"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=chriswarbo">chriswarbo</a> <a href="item?id=9051470">20 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">The main problem is that there are many kinds of incompatible &quot;data-structure streams&quot;. Using <i>a</i> scripting language doesn&#x27;t solve the problem, it just standardises on one particular ad-hoc parser&#x2F;serialiser combination (say, Python&#x27;s pickle, for example).<p>That&#x27;s fine for personal use, or in a single project, but doesn&#x27;t scale like &quot;dumb&quot; text does.</font></span><p><font size="1"><u><a href="reply?id=9051470&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051532" href="vote?for=9051532&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051532"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=nine_k">nine_k</a> <a href="item?id=9051532">19 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">If there was a non-ideal but <i>reasonable</i> standard serialization format, like maybe IFF [1] or BSON [2], it would still simplify things, and common tools like ` + "`" + `cat` + "`" + ` might support decoding them.<p>It would be easy to wrap an arbitrary <i>other</i> packed format inside a binary string, or an arbitrary text format inside a text string.<p>IFF is quite successful in certain areas, BTW.<p>[1]: <a href="http://en.wikipedia.org/wiki/Interchange_File_Format" rel="nofollow">http:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Interchange_File_Format</a>
[2]: <a href="http://en.wikipedia.org/wiki/BSON" rel="nofollow">http:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;BSON</a></font></span><p><font size="1"><u><a href="reply?id=9051532&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9052301" href="vote?for=9052301&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052301"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tracker1">tracker1</a> <a href="item?id=9052301">10 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">You could always pass a message per line (so to speak) and use msgpack or json... if you want compression you could use json+gz<p>Of course, you could also do something similar with a 0mq adapter as well for a request&#x2F;response server, which is available pretty much everywhere you might need it (language wise)...  It&#x27;s an interesting generic interface... however as I mostly use node for newer development, it&#x27;s so trivial to use sockets or websockets directly for this, I&#x27;d just assume go that route... or for that matter, something like sockjs&#x2F;shoe.</font></span><p><font size="1"><u><a href="reply?id=9052301&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9053337" href="vote?for=9053337&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9053337"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=jqgatsby">jqgatsby</a> <a href="item?id=9053337">3 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">At the risk of perpetuating the meme that hacker news is overly enamored of Golang, I&#x27;d like to say that providing &quot;data structure streams&quot; is exactly Go&#x27;s sweet spot, and it&#x27;s about as awesome as you would hope it would be.</font></span><p><font size="1"><u><a href="reply?id=9053337&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051557" href="vote?for=9051557&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051557"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=dkarapetyan">dkarapetyan</a> <a href="item?id=9051557">19 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">How exactly would that work? How would you pass one kind of data structure from one program to another so that they both could understand it without involving parsers or deserializer? To be concrete let&#x27;s start with the simplest possible data structure the linked list.</font></span><p><font size="1"><u><a href="reply?id=9051557&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9052388" href="vote?for=9052388&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052388"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=IshKebab">IshKebab</a> <a href="item?id=9052388">9 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">That&#x27;s no different from text. You can&#x27;t pass one kind of text from one program to another without both understanding it. That&#x27;s why ls has a million different and confusing quoting options.<p>The advantage of using a proper data format is<p>a) You don&#x27;t have to do in-band signalling so it will be far more reliable (you <i>still</i> can&#x27;t have spaces in filenames for a lot of unixy things).
b) The encoding is standard. Using text for pipes still requires some kind of encoding in general, but there are many different ways (is it one entry per line? space separated? are strings quoted? etc.)</font></span><p><font size="1"><u><a href="reply?id=9052388&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9052520" href="vote?for=9052520&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052520"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=jeremiep">jeremiep</a> <a href="item?id=9052520">8 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">A linked-list is already too specific, a sequence is all you need to express any linear arrangement of data, be it an array, linked list, vector, or any of the myriad of other concrete sequence types.</font></span><p><font size="1"><u><a href="reply?id=9052520&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9052098" href="vote?for=9052098&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052098"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=sparkie">sparkie</a> <a href="item?id=9052098">12 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">S-expression</font></span><p><font size="1"><u><a href="reply?id=9052098&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9052107" href="vote?for=9052107&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052107"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=dkarapetyan">dkarapetyan</a> <a href="item?id=9052107">12 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">And how do you convert any data structure to an s-expression? You serialize the data. How do you get the s-expression into a form your program can understand? You parse it.<p>In other words you still haven&#x27;t solved the fundamental problem of passing data back and forth between different programs. In fact if you are going to mandate a specific serialization&#x2F;deserialization format then JSON, XML, or even ASN.1 are better options than s-expressions.</font></span><p><font size="1"><u><a href="reply?id=9052107&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="160"></td><td valign="top"><center><a id="up_9052307" href="vote?for=9052307&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052307"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=sparkie">sparkie</a> <a href="item?id=9052307">10 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">My point was more, let your language do the parsing and deserialization for you. S-expressions are merely a textual representation of linked lists. The parsing and evaluation of text is already written as part of the language.<p>The other point was that we&#x27;re ultimately stuck with serial forms of communication, be it wires, pipes, sockets etc. If we want to easily transfer structured data through these serial channels, we should probably build up our structures from a serial primitives, and S-expressions are much more handy than plain strings (which we may not even be able to parse without ambiguity), or XML, JSON or whatnot. One, because the parser is already implemented as part of the language, and secondly, because you can transfer code in addition to data, and evaluate it on the remote end to bring into scope more &quot;structured&quot; data like records.<p>I did try to include a bit more in the previous post, but I&#x27;d accidentally hit save, and I was unable to edit the post afterwards</font></span><p><font size="1"><u><a href="reply?id=9052307&amp;goto=threads%3Fid%3Ddkarapetyan">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="160"></td><td valign="top"><center><a id="up_9052437" href="vote?for=9052437&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052437"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=pjmlp">pjmlp</a> <a href="item?id=9052437">9 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Somehow it always felt natural in Lisp Machines.</font></span><p><font size="1"><u><a href="reply?id=9052437&amp;goto=threads%3Fid%3Ddkarapetyan">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051969" href="vote?for=9051969&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051969"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=cheeze">cheeze</a> <a href="item?id=9051969">14 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">How does PowerShell do it?</font></span><p><font size="1"><u><a href="reply?id=9051969&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9052039" href="vote?for=9052039&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052039"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=dkarapetyan">dkarapetyan</a> <a href="item?id=9052039">13 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">PowerShell can not pass anything structured unless the other end of the pipe is a cmdlet and even then there are times when the other end of the pipe is forced to interpret whatever is passed to it as a string instead of a more structured object like a dictionary.<p>So even within a controlled environment like PowerShell where everything is a cmdlet it is still impossible to pass only structured objects between commands.</font></span><p><font size="1"><u><a href="reply?id=9052039&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9052736" href="vote?for=9052736&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052736"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=asergeyev"><font color="#3c963c">asergeyev</font></a> <a href="item?id=9052736">6 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Since there is so much pointless discussion about use of text streams under this comment.<p>When someone has example of situation when binary, json or other communication between websocketd and program is needed, please just file a ticket, it would be great to see practical situation instead of just arguing with each other about text stream&#x2F;unix principles&#x2F;json and other stuff.</font></span><p><font size="1"><u><a href="reply?id=9052736&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051901" href="vote?for=9051901&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051901"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=winter_blue">winter_blue</a> <a href="item?id=9051901">15 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">You&#x27;re on the right track. This does however present us with a challenging problem: developing a single consistent efficient cross-platform language-independent form of storing and transmitting data (between programs).<p>It&#x27;s something to ruminate upon.</font></span><p><font size="1"><u><a href="reply?id=9051901&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9052512" href="vote?for=9052512&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052512"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=jeremiep">jeremiep</a> <a href="item?id=9052512">8 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">This is already a partly solved challenge. Text streams don&#x27;t magically come into existence, programs needs STDIN, STDOUT and STDERR at their disposal to use them.<p>All you really need are scalars, sequences and mappings to fully express any data structure. Tagged types would be sugar on top but it could quickly add unwanted complexity.<p>All you need is a shell capable of marshalling data between the different programs piped together. Powershell is a nice idea but it only runs .NET code and that&#x27;s a limitation I can&#x27;t live with.</font></span><p><font size="1"><u><a href="reply?id=9052512&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9052309" href="vote?for=9052309&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052309"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tracker1">tracker1</a> <a href="item?id=9052309">10 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Most json stringifiers will create a json with no line terminators that aren&#x27;t inside escaped strings...  so a json object terminated by a CR would seem to be a pretty logical data format for open text...<p>There&#x27;s also msgpack, protocol buffers as well... I think the plain text of json that is readily a line per message is far simpler and easier to handle though.</font></span><p><font size="1"><u><a href="reply?id=9052309&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051578" href="vote?for=9051578&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051578"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=ebbv">ebbv</a> <a href="item?id=9051578">19 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">There&#x27;s a very good reason that UNIX is data structure ambivalent; because supporting lower level (text streams) offers far more flexibility. If you want to use a specific data structure type among your own suite of scripts you are free to do this, UNIX does not get in your way.<p>At the same time, if you want to write a utility like grep that is agnostic to the structure of your text, it can exist and work. If UNIX cared about data structures, this wouldn&#x27;t work.<p>Here&#x27;s a good rule for you; if you find yourself thinking the way UNIX (or any other long existing and widely supported system) does something is dumb and you know better, assume you are wrong and look for the reasons that the people who are smarter than you chose to do it the way that it was done.</font></span><p><font size="1"><u><a href="reply?id=9051578&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051793" href="vote?for=9051793&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051793"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=woodman">woodman</a> <a href="item?id=9051793">17 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">This is a tough lesson and for many the only teacher is experience.  For the longest time I avoided what I considered abstract math, despite the general wisdom of its importance to computer science.  I spent weeks writing software that could predict customer complaints based on supplier action.  Given the first three days of complaints following an action, I could reliably predict the total number of complaints a year into the future.  I proudly showed one of my coworkers, who didn&#x27;t have the aversion to math that I did, he informed me that I just reinvented poisson linear regression.  I learned my lesson that day.  This guy will likely figure it out after a couple of tries as well :)</font></span><p><font size="1"><u><a href="reply?id=9051793&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051907" href="vote?for=9051907&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051907"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=Curmudgel">Curmudgel</a> <a href="item?id=9051907">15 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Have you read the Unix Haters Handbook?<p><a href="http://web.mit.edu/~simsong/www/ugh.pdf" rel="nofollow">http:&#x2F;&#x2F;web.mit.edu&#x2F;~simsong&#x2F;www&#x2F;ugh.pdf</a></font></span><p><font size="1"><u><a href="reply?id=9051907&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9052040" href="vote?for=9052040&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052040"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=mjevans">mjevans</a> <a href="item?id=9052040">13 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I hadn&#x27;t, looks like an hour of two of amusement.<p>While there are some occasional good points that could be converted in to solutions, I can&#x27;t help but think that this book is more amusement than actual constructive criticisms well packaged.</font></span><p><font size="1"><u><a href="reply?id=9052040&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="160"></td><td valign="top"><center><a id="up_9053624" href="vote?for=9053624&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9053624"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=Curmudgel">Curmudgel</a> <a href="item?id=9053624">2 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">It&#x27;s a collection of some of the best rants from the Unix Haters mailing list that existed in the late eighties&#x2F;early nineties. The people that were on the list usually had experience with operating systems that were more advanced than Unix. Constructive criticism was never really the point of the mailing list.<p>My point was that the parent&#x27;s suggestion that anyone who criticizes Unix obviously isn&#x27;t smart enough to understand it is just flat out wrong and offensive.</font></span><p><font size="1"><u><a href="reply?id=9053624&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051976" href="vote?for=9051976&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051976"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=segmondy">segmondy</a> <a href="item?id=9051976">14 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#9c9c9c">you never got to learn and understand the unix philosophy.  your loss.</font></span><p><font size="1"><u><a href="reply?id=9051976&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9052389" href="vote?for=9052389&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052389"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=IshKebab">IshKebab</a> <a href="item?id=9052389">9 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">The &quot;unix philosphy&quot; is out-dated and wrong in many cases. You&#x27;re an idiot if you follow it blindly.</font></span><p><font size="1"><u><a href="reply?id=9052389&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9052805" href="vote?for=9052805&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052805"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9052805">6 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">A philosophy is neither right nor wrong. It&#x27;s a philosophy, one that you choose to subscribe to, or not.</font></span><p><font size="1"><u><a href="reply?id=9052805&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051031" href="vote?for=9051031&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051031"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9051031">22 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">OP here. Something I forgot to mention on the page is how much this simplified life for a server admin. Using &quot;ps&quot; you can see each connection, the memory overhead, CPU usage. It&#x27;s easy for a sysadmin to kill bad connections without taking down the whole server.</font></span><p><font size="1"><u><a href="reply?id=9051031&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051307" href="vote?for=9051307&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051307"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=comboy">comboy</a> <a href="item?id=9051307">21 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I like the project. But it says:<p>&gt; Full duplex messaging<p>And the examples only show single direction. Is my understanding correct that everything received goes as STDIN? And is it also possible to run websocketd as a client?</font></span><p><font size="1"><u><a href="reply?id=9051307&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051431" href="vote?for=9051431&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051431"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=jakejake">jakejake</a> <a href="item?id=9051431">20 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">In the source code &#x2F;examples folder most of the languages have a bi-directional example called &quot;greeter&quot;</font></span><p><font size="1"><u><a href="reply?id=9051431&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051821" href="vote?for=9051821&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051821"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=itsbits">itsbits</a> <a href="item?id=9051821">16 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">can i use other web socket clients like socket.io??</font></span><p><font size="1"><u><a href="reply?id=9051821&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9052319" href="vote?for=9052319&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052319"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tracker1">tracker1</a> <a href="item?id=9052319">10 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">websockets after upgrade are not message based like the same as socket.io (which adds fallback&#x2F;fall-forward) and sockjs does this providing a stream interface...<p>If you don&#x27;t need to support a web browser client, you don&#x27;t need the extra overhead.. and if you do, you&#x27;re better off just using socket.io or shoe and having your server in node.js ... as an aside, I&#x27;d probably just use raw sockets in node if I didn&#x27;t need browser support.</font></span><p><font size="1"><u><a href="reply?id=9052319&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9052801" href="vote?for=9052801&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052801"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9052801">6 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">WebSockets are message based.</font></span><p><font size="1"><u><a href="reply?id=9052801&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9052008" href="vote?for=9052008&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052008"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=Lerc">Lerc</a> <a href="item?id=9052008">14 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I used this a while ago on my own insane project.  I had a Webdav server and websocketd providing a Web interface to a Linux box.<p>Even at it&#x27;s young age (bug reports #5 and #7 were mine), it allowed me to progress a lot further in my project before I needed to write a server designed specifically for the task at hand.<p>In the end I wrote userserv <a href="https://github.com/Lerc/userserv" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;Lerc&#x2F;userserv</a> for the one must have feature I needed.  I needed logins and responses delivered from a process with the UID of the CookieToken.<p>So, thanks Joe.  Notanos got further because of websocketd and while I&#x27;m not currently using it,  There&#x27;s a high chance of me doing so in future projects.</font></span><p><font size="1"><u><a href="reply?id=9052008&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9052806" href="vote?for=9052806&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052806"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9052806">6 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Great to hear! Thanks :)</font></span><p><font size="1"><u><a href="reply?id=9052806&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051195" href="vote?for=9051195&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051195"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=elierotenberg">elierotenberg</a> <a href="item?id=9051195">21 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Unless you need to handle a very small number of concurrent connections, using 1 process per connection seems to be a huge overhead, although I can think of some use cases.<p>However, I can imagine a similar tool doing multi&#x2F;demultiplexing, eg the handler process would take input text lines prepended with a connection identifier (eg. &quot;$socketID $message&quot;) and output using a similar formatting. Pretty much like websocketd but with multiplexing and unixy&#x2F;pipe-friendly (eg. you can apply grep&#x2F;awk&#x2F;etc before and after).<p>How would this fit compared to websocketd?</font></span><p><font size="1"><u><a href="reply?id=9051195&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051515" href="vote?for=9051515&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051515"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=ayani">ayani</a> <a href="item?id=9051515">19 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Indeed, there is no free lunch.<p>At is stands, this is only really workable for low traffic (so it doesn&#x27;t eat memory) where connections do not come and go frequently (so it doesn&#x27;t eat process management CPU).<p>Once you start doing multiplexing for the sake of making this more reasonable in terms of resource usage, the simplicity benefits kind of fall away as you move closer to a full concurrent web framework.<p>I guess it really depends what you&#x27;re tuning for, what your use case is, and how much hardware budget you have to throw at the problem.</font></span><p><font size="1"><u><a href="reply?id=9051515&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9052821" href="vote?for=9052821&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052821"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9052821">6 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">CGI fell out of favor for this reason, but WebSockets have a different runtime profile: instead of having to deal with 10K shortlived requests per second, WebSocket endpoints have much fewer but longer lived connections. This is why the CGI model actually works well on WebSockets.</font></span><p><font size="1"><u><a href="reply?id=9052821&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051688" href="vote?for=9051688&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051688"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=estava">estava</a> <a href="item?id=9051688">18 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">BTW, there is a VM for Dart that is experimenting with different concurrent modes to provide an alternative to async programming: <a href="https://github.com/dart-lang/fletch" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;dart-lang&#x2F;fletch</a><p>You can read its short wiki for some clues: <a href="https://github.com/dart-lang/fletch/wiki/Processes-and-Isolates" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;dart-lang&#x2F;fletch&#x2F;wiki&#x2F;Processes-and-Isola...</a><p>I like Fletch&#x27;s idea very much. Imagine not having to worry about Async all the time.<p>Not sure how everything is implemented in Fletch, but I think I heard that in Fletch they are able to share 1 thread per many processes if need be. And they have been trying hard to save memory while implementing those features.<p>If you want to run some tests to compare with, I created some small samples using different Dart implementations and NodeJS here: <a href="https://github.com/jpedrosa/arpoador/tree/master/direct_test/simplest_http_response" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;jpedrosa&#x2F;arpoador&#x2F;tree&#x2F;master&#x2F;direct_test...</a><p>Fletch also supports a kind of Coroutine: <a href="https://github.com/dart-lang/fletch/wiki/Coroutines-and-Threads" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;dart-lang&#x2F;fletch&#x2F;wiki&#x2F;Coroutines-and-Thre...</a></font></span><p><font size="1"><u><a href="reply?id=9051688&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9052226" href="vote?for=9052226&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052226"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=skrebbel">skrebbel</a> <a href="item?id=9052226">11 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">&gt; <i>Imagine not having to worry about Async all the time.</i><p>I&#x27;m nitpicking, because Fletch truly sounds very cool indeed, but when I use Elixir, Erlang, or Go, I never worry about async either. From that wiki page, I can&#x27;t really see what the difference with the Erlang VM is.<p>(that&#x27;s a good thing, the Erlang VM is awesome, and being able to write server code on an Erlang-like VM and still share code with the browser sounds like <i>the</i> thing that could make me adopt Dart)</font></span><p><font size="1"><u><a href="reply?id=9052226&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051577" href="vote?for=9051577&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051577"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=platz">platz</a> <a href="item?id=9051577">19 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">About wow many connections for an average machine with 8GB ram would be deemed &#x27;OK&#x27; with this tool?</font></span><p><font size="1"><u><a href="reply?id=9051577&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9051603" href="vote?for=9051603&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051603"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=jakejake">jakejake</a> <a href="item?id=9051603">19 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I was just playing around with this tonight using PHP and each process was about 5Mb of RAM.  I&#x27;d imagine if you wrote your server code in, say C instead, then the memory footprint would be much smaller.<p>There&#x27;s also a limit to the number of processes allowed as well.  On my OSX laptop with 16Gb RAM for example the default limit is 709 (kinda strange number???).  The command<p>ulimit -a<p>will tell you the value of &quot;max user processes&quot; for your machine.</font></span><p><font size="1"><u><a href="reply?id=9051603&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="160"></td><td valign="top"><center><a id="up_9052120" href="vote?for=9052120&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052120"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=danieldk">danieldk</a> <a href="item?id=9052120">12 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">The problem here of course is that a CGI-like approach does a fork plus execve for each request, which does not give a large benefit of sharing.<p>If you have a simple forking socket-based server, Linux (I assume that OS X is not any different) the amount of memory per process is much lower because it uses copy-on-write pages for forks and it&#x27;s largely the same process.</font></span><p><font size="1"><u><a href="reply?id=9052120&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="160"></td><td valign="top"><center><a id="up_9051613" href="vote?for=9051613&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051613"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=leephillips">leephillips</a> <a href="item?id=9051613">18 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">That must be an OSX oddity. I just checked my Ubuntu laptop with 3GB RAM: 23967 processes, and a Debian server that I happened to be logged in to, with 0.5 GB: 127118 processes.</font></span><p><font size="1"><u><a href="reply?id=9051613&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="200"></td><td valign="top"><center><a id="up_9051620" href="vote?for=9051620&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051620"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=platz">platz</a> <a href="item?id=9051620">18 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Of course, with 3GB you could only get 600 connections at 5MB a pop.</font></span><p><font size="1"><u><a href="reply?id=9051620&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9052024" href="vote?for=9052024&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052024"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=Rapzid">Rapzid</a> <a href="item?id=9052024">14 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">It&#x27;s just so easy to write a web-socket server these days in Go and other languages it might not be worth the trouble.  I can only see something like this being useful in odd-ball use cases; of which none really come to mind right now but I&#x27;m sure I&#x27;d recognize it when I was faced with it.</font></span><p><font size="1"><u><a href="reply?id=9052024&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051234" href="vote?for=9051234&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051234"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=asergeyev"><font color="#3c963c">asergeyev</font></a> <a href="item?id=9051234">21 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">There is closed ticket (github.com&#x2F;joewalnes&#x2F;websocket) where we were battling this out, you&#x27;re always welcome to join with good ideas, that would be appreciated.</font></span><p><font size="1"><u><a href="reply?id=9051234&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051622" href="vote?for=9051622&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051622"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=michaelmior">michaelmior</a> <a href="item?id=9051622">18 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Sounds basically like the difference between CGI and FastCGI.</font></span><p><font size="1"><u><a href="reply?id=9051622&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9052862" href="vote?for=9052862&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052862"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=vram22">vram22</a> <a href="item?id=9052862">6 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I had come across websocketd a while ago, and to try it out, wrote a simple Python program and a web page. The two posts about it are here:<p>1. Use WebSockets and Python for web-based system monitoring:<p><a href="http://jugad2.blogspot.in/2014/01/use-websockets-and-python-for-web-based.html" rel="nofollow">http:&#x2F;&#x2F;jugad2.blogspot.in&#x2F;2014&#x2F;01&#x2F;use-websockets-and-python-...</a><p>2. websocketd and Python for system monitoring - the JavaScript WebSocket client:<p><a href="http://jugad2.blogspot.in/2014/01/websocketd-and-python-for-system.html" rel="nofollow">http:&#x2F;&#x2F;jugad2.blogspot.in&#x2F;2014&#x2F;01&#x2F;websocketd-and-python-for-...</a><p>Note: As it says in one of the posts, you have to:<p>set PYTHONUNBUFFERED=true<p>for the Python program to work as a websocket server, though it works fine without that if only run directly at the command line (without websocketd). Thanks to Joe for pointing this out.<p>websocketd is a nice utility.</font></span><p><font size="1"><u><a href="reply?id=9052862&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051779" href="vote?for=9051779&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051779"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=ianbicking">ianbicking</a> <a href="item?id=9051779">17 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I don&#x27;t understand how I&#x27;d use this. WebSockets are generally for server-initiated events, but this doesn&#x27;t make it very easy to initiate events on the server. Usually it will be some pubsub situation, so I&#x27;d want a server process to be able to emit a message to one or many connections - but instead the connection is tied to one process for its life.  I&#x27;d like to see an example like a simple chat room.</font></span><p><font size="1"><u><a href="reply?id=9051779&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9052827" href="vote?for=9052827&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052827"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9052827">6 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I&#x27;ve built chatrooms with websocketd. To do this, you a shared pub&#x2F;sub store. Redis is great, so is Postgres (with its pub&#x2F;sub add-ons). Storing chat data in a store is more durable than keeping it in memory on a single machine.</font></span><p><font size="1"><u><a href="reply?id=9052827&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9052053" href="vote?for=9052053&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052053"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=andrewstuart2">andrewstuart2</a> <a href="item?id=9052053">13 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Actually, I think you&#x27;re looking for Server-Sent Events [1] for something of a pub&#x2F;sub nature. WebSockets, on the other hand, are intended for realtime <i>bidirectional</i> communication over a single TCP connection.<p>Pub&#x2F;Sub is much more one-directional. A single subscribe event initiates a stream of all published events. Server-Sent Events are more suited for this because the server will never have to bother checking the TCP connection for incoming data.<p>[1] <a href="http://www.w3.org/TR/2011/WD-eventsource-20110208/" rel="nofollow">http:&#x2F;&#x2F;www.w3.org&#x2F;TR&#x2F;2011&#x2F;WD-eventsource-20110208&#x2F;</a></font></span><p><font size="1"><u><a href="reply?id=9052053&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9052323" href="vote?for=9052323&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052323"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tracker1">tracker1</a> <a href="item?id=9052323">10 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">The solution in question could well be used for pub&#x2F;sub servers or for request&#x2F;response patterns... it&#x27;s really pretty cool.  I&#x27;m needing to expose a very small utility that uses C# for the micro service... I&#x27;m considering this for that reason... aside from that, I think the solution in question is pretty cool.</font></span><p><font size="1"><u><a href="reply?id=9052323&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051328" href="vote?for=9051328&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051328"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=riobard">riobard</a> <a href="item?id=9051328">21 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I guess the next logical step is to build a virtual filesystem such that each connection is represented by a file. Then you can further decouple the connection handling from the actual application. Applications can start later to talk to a connection established before.</font></span><p><font size="1"><u><a href="reply?id=9051328&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051514" href="vote?for=9051514&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051514"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=nine_k">nine_k</a> <a href="item?id=9051514">19 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">That would be less &#x27;unixy&#x27; and more &#x27;plan-niney&#x27; :)<p>I like the idea of having a FS interface, e.g. using named pipes made available by the daemon.</font></span><p><font size="1"><u><a href="reply?id=9051514&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9052194" href="vote?for=9052194&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052194"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=espadrine">espadrine</a> <a href="item?id=9052194">11 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">That&#x27;s the idea behind <a href="https://thefiletree.com/" rel="nofollow">https:&#x2F;&#x2F;thefiletree.com&#x2F;</a>. The decoupling works well for applications tied to a textual format (see eg. <a href="https://thefiletree.com/heap/diagram.sequence" rel="nofollow">https:&#x2F;&#x2F;thefiletree.com&#x2F;heap&#x2F;diagram.sequence</a>). It means collaborative SVG editing, for instance, is not a challenge. On the other hand, binary data (bitmap images, sound, video) would need to be treated specially, I think, unless we had a common structure format and protocol that would map to each of those.<p>(The code is here: <a href="https://github.com/garden/" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;garden&#x2F;</a>)</font></span><p><font size="1"><u><a href="reply?id=9052194&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051982" href="vote?for=9051982&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051982"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=dangayle">dangayle</a> <a href="item?id=9051982">14 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">There was SpockFS here on HN a while back:
<a href="https://github.com/unbit/spockfs" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;unbit&#x2F;spockfs</a></font></span><p><font size="1"><u><a href="reply?id=9051982&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051028" href="vote?for=9051028&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051028"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=NathanOsullivan">NathanOsullivan</a> <a href="item?id=9051028">22 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">A project in a similar vein is websockify ( <a href="https://github.com/kanaka/websockify" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;kanaka&#x2F;websockify</a> ) , which makes an existing app with a TCP endpoint available over websockets.</font></span><p><font size="1"><u><a href="reply?id=9051028&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051089" href="vote?for=9051089&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051089"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=espadrine">espadrine</a> <a href="item?id=9051089">22 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">What are the differences? Do I miss anything?<p>1. websocketify allows binary, while websocketd is text-only<p>2. websocketify does I&#x2F;O through a socket that the program uses (and that it sniffes through rebind.so), while websocketd relies on stdin &#x2F; stdout<p>3. The arguments are different<p>websocketd --port=8080 my-program<p>websocketify 8080 -D -- my-program</font></span><p><font size="1"><u><a href="reply?id=9051089&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051205" href="vote?for=9051205&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051205"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=asergeyev"><font color="#3c963c">asergeyev</font></a> <a href="item?id=9051205">21 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Also websocketd is multiplatform and does not require python. Neither good or bad, just another difference :)<p>Also, not sure if websocketify can but websocketd also has --dir argument and can supervise and route many sockets to many different programs.</font></span><p><font size="1"><u><a href="reply?id=9051205&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9053121" href="vote?for=9053121&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9053121"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=cpncrunch">cpncrunch</a> <a href="item?id=9053121">4 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">websockify can be run on Node.js as well as python. Both versions seem to be highly reliable (I&#x27;m using them on multiple production servers with paying customers for web conferencing). The python version doesn&#x27;t seem to work on Windows servers, but the Node version works fine.</font></span><p><font size="1"><u><a href="reply?id=9053121&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051099" href="vote?for=9051099&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051099"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9051099">22 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I haven&#x27;t used websocketify. I&#x27;d be interested to have users try out both and write up their experiences.</font></span><p><font size="1"><u><a href="reply?id=9051099&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051033" href="vote?for=9051033&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051033"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9051033">22 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Nice! I hadn&#x27;t seen that. Yeah, that&#x27;s pretty sweet.</font></span><p><font size="1"><u><a href="reply?id=9051033&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051015" href="vote?for=9051015&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051015"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=detaro">detaro</a> <a href="item?id=9051015">22 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Looks very nice for quick prototype kind of things in any language or to make existing tools quickly available to a small circle of users!<p>for larger-scale usage the overhead probably is to big.</font></span><p><font size="1"><u><a href="reply?id=9051015&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051026" href="vote?for=9051026&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051026"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9051026">22 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">OP here. The overhead is really dependent on your process overhead. I typically use it for Python&#x2F;Ruby&#x2F;C apps which are relatively lightweight compared to something JVM based.<p>The runtime profile of WebSockets tends to be different to typical HTTP requests too. With typical HTTP you&#x27;re often optimizing for 1000s of short requests per second, whereas with WebSockets the requests are much longer lived.</font></span><p><font size="1"><u><a href="reply?id=9051026&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051442" href="vote?for=9051442&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051442"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=jeremiep">jeremiep</a> <a href="item?id=9051442">20 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">The JVM is optimized for long-running processes as it takes time for the JIT to kick in. Other than the memory footprint your code gets quite a performance boost; I&#x27;m always surprised how much of a difference it makes before and after.<p>You wouldn&#x27;t want to boot a JVM process per connection but rather implement the listening socket yourself and dispatch connections within that same process with all of the required services already initialized. A WebSocket server is no different.</font></span><p><font size="1"><u><a href="reply?id=9051442&amp;goto=threads%3Fid%3Ddetaro">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051039" href="vote?for=9051039&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051039"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=hippich">hippich</a> <a href="item?id=9051039">22 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Depending on the job. If your job involve long lasting connections, overhead of setting up websocket connection and spawning new process wouldn&#x27;t matter.<p>But this is clearly will not cut for typical HTTP static stuff.<p>So if your server side keeps connection for a long period of time (think IRC server, or netcat?) - this might be good.</font></span><p><font size="1"><u><a href="reply?id=9051039&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051583" href="vote?for=9051583&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051583"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=phamilton">phamilton</a> <a href="item?id=9051583">19 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">The overhead isn&#x27;t the setup. It&#x27;s the memory footprint of a process. A minimal process (just sleeping) will use ~128KB. One process per connection means a server will need well over 1GB memory per 8000 connected users. A python process just sleeping will be almost 3MB, which means you get 333 connections per GB.<p>Compare this with an efficient green threads implementation. In Erlang you can have 100k sleeping &quot;processes&quot; in just 200MB of memory.</font></span><p><font size="1"><u><a href="reply?id=9051583&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051363" href="vote?for=9051363&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051363"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=Udo">Udo</a> <a href="item?id=9051363">20 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">This is a good idea.<p>Myself, I noticed that almost all my websockets projects could easily share one single code base, and finally I just made a Websockets boilerplate repo that I can pull from for any given project. This is what node.js really excels at, and it&#x27;s an execution model fundamentally different from websocketd: being a message broker between the client and the request-based web server.<p>Some people don&#x27;t like the separation between web server and websockets server, but when you think about it they don&#x27;t belong quite on the same level of abstraction. Plus, it&#x27;s usually orders of magnitude easier to reason about single requests than to reason about a complex persistent application server&#x27;s state.</font></span><p><font size="1"><u><a href="reply?id=9051363&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051200" href="vote?for=9051200&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051200"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=lordlarm">lordlarm</a> <a href="item?id=9051200">21 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">For simple one-directional communication (Server to client(s)) as shown in the example, it may for many people be simpler to use EventSource [1]<p>I&#x27;ve used this for UI&#x27;s where the server continuously sends&#x2F;pushes updates to the clients. Really handy, and multiple implementations and libraries available in most languages.<p>Of interest is perhaps also the spec [2]<p>[1]: <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventSource" rel="nofollow">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;EventSource</a><p>[2]: <a href="https://html.spec.whatwg.org/multipage/comms.html#the-eventsource-interface" rel="nofollow">https:&#x2F;&#x2F;html.spec.whatwg.org&#x2F;multipage&#x2F;comms.html#the-events...</a></font></span><p><font size="1"><u><a href="reply?id=9051200&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051254" href="vote?for=9051254&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051254"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=asergeyev"><font color="#3c963c">asergeyev</font></a> <a href="item?id=9051254">21 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Not supported in any of IE versions... <a href="https://status.modern.ie/serversenteventseventsource?term=EventSource" rel="nofollow">https:&#x2F;&#x2F;status.modern.ie&#x2F;serversenteventseventsource?term=Ev...</a><p>And WebSockets is working since IE10
<a href="https://status.modern.ie/websocket?term=WebSocket" rel="nofollow">https:&#x2F;&#x2F;status.modern.ie&#x2F;websocket?term=WebSocket</a></font></span><p><font size="1"><u><a href="reply?id=9051254&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051975" href="vote?for=9051975&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051975"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=stephenr">stephenr</a> <a href="item?id=9051975">14 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#737373">Due to it&#x27;s nature, EventSource can be quite easily implemented using a polyfill for legacy browsers.<p>It&#x27;s also MUCH easier to setup&#x2F;run in a multi-layered stack (e.g. Pound&#x2F;HAProxy &gt; Varnish &gt; App Server).<p>As per usual, WebSockets is what the &quot;cool kids&quot; use, even when it&#x27;s often much less appropriate and much less flexible.</font></span><p><font size="1"><u><a href="reply?id=9051975&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9052476" href="vote?for=9052476&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052476"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tokenizerrr">tokenizerrr</a> <a href="item?id=9052476">8 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">So what would you use to implement the polyfill for IE10? Is there something more appropriate than websockets? If not, are we not back to square one where you may as well use websockets from the start?</font></span><p><font size="1"><u><a href="reply?id=9052476&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="160"></td><td valign="top"><center><a id="up_9052843" href="vote?for=9052843&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052843"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=stephenr">stephenr</a> <a href="item?id=9052843">6 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">There are multiple polyfills for EventSource - mostly all it needs is a working XHR implementation.<p>The key thing is that a proxy&#x2F;load balancer doesn&#x27;t need special cases to support EventSource like it needs (and often doesn&#x27;t have) with websockets.</font></span><p><font size="1"><u><a href="reply?id=9052843&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9053265" href="vote?for=9053265&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9053265"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=MatthewWilkes">MatthewWilkes</a> <a href="item?id=9053265">4 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">It&#x27;s a petty comment, I know, but:<p><pre><code>    for count in range(0, 10):
      print count + 1
      sleep(0.5)
</code></pre>
makes me feel sad.</font></span><p><font size="1"><u><a href="reply?id=9053265&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9053460" href="vote?for=9053460&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9053460"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=kalmi10">kalmi10</a> <a href="item?id=9053460">3 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">How are message boundaries handled?<p>WebSockets are message-based. UNIX streams are not.</font></span><p><font size="1"><u><a href="reply?id=9053460&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9054194" href="vote?for=9054194&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9054194"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9054194">15 minutes ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">websocketd treats each line as a message. i.e. boundaries are marked with \n</font></span><p><font size="1"><u><a href="reply?id=9054194&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051194" href="vote?for=9051194&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051194"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=minimax">minimax</a> <a href="item?id=9051194">21 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">The thing with WebSockets is that they are message oriented. WebSockets endpoints are presented with a series of distinct messages, whereas stdin&#x2F;stdout are stream based and you have to build messaging on top, if that&#x27;s what you want. I guess the idea here is that you are just using &#x27;\n&#x27; as the message delimiter?</font></span><p><font size="1"><u><a href="reply?id=9051194&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051212" href="vote?for=9051212&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051212"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=asergeyev">asergeyev</a> <a href="item?id=9051212">21 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Pretty much. Good example is Joe&#x27;s vmstats <a href="https://github.com/joewalnes/web-vmstats" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;joewalnes&#x2F;web-vmstats</a></font></span><p><font size="1"><u><a href="reply?id=9051212&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051955" href="vote?for=9051955&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051955"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=romanpoet">romanpoet</a> <a href="item?id=9051955">15 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Why is this better than netcat?<p><a href="https://en.wikipedia.org/wiki/Netcat" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Netcat</a></font></span><p><font size="1"><u><a href="reply?id=9051955&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051977" href="vote?for=9051977&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051977"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=colanderman">colanderman</a> <a href="item?id=9051977">14 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Because it handles the WebSocket protocol for you.</font></span><p><font size="1"><u><a href="reply?id=9051977&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051597" href="vote?for=9051597&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051597"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=jkarneges">jkarneges</a> <a href="item?id=9051597">19 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Elegant approach. Reminds me of inetd.</font></span><p><font size="1"><u><a href="reply?id=9051597&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051980" href="vote?for=9051980&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051980"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=colanderman">colanderman</a> <a href="item?id=9051980">14 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I&#x27;m surprised this <i>isn&#x27;t</i> just implemented as an inetd handler, given the &quot;do one thing and do it well&quot; mantra.</font></span><p><font size="1"><u><a href="reply?id=9051980&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9052213" href="vote?for=9052213&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052213"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=fit2rule">fit2rule</a> <a href="item?id=9052213">11 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Its the 21st Century.  People don&#x27;t look backwards any more.  inetd is pass..</font></span><p><font size="1"><u><a href="reply?id=9052213&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9052720" href="vote?for=9052720&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052720"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=colanderman">colanderman</a> <a href="item?id=9052720">6 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I&#x27;m assuming you&#x27;re being sarcastic.  This tool wants to &quot;do things the Unix way&quot;... which was invented in the 1970s.</font></span><p><font size="1"><u><a href="reply?id=9052720&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051910" href="vote?for=9051910&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051910"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=aabajian">aabajian</a> <a href="item?id=9051910">15 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">This looks great, without knowing much I was able to get:<p>.&#x2F;websocketd --staticdir=. --port=8123 ps<p>to give me a simple output of processes. What I&#x27;d really LOVE is to get this to work:<p>.&#x2F;websocketd --staticdir=. --port=8123 htop<p>It&#x27;d be great if I could see the output of htop on the web...from anywhere. I guess htop is setting up a different video mode or something that isn&#x27;t compatible?</font></span><p><font size="1"><u><a href="reply?id=9051910&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051999" href="vote?for=9051999&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051999"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=olalonde">olalonde</a> <a href="item?id=9051999">14 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I think you would need to feed what you are getting to a Javascript terminal emulator. (e.g. <a href="https://github.com/chjj/tty.js/" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;chjj&#x2F;tty.js&#x2F;</a>)</font></span><p><font size="1"><u><a href="reply?id=9051999&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9052608" href="vote?for=9052608&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052608"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tomerbd">tomerbd</a> <a href="item?id=9052608">7 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">beautiful website may I ask with which template &#x2F; framework it was written? (is it in github by any chance?)</font></span><p><font size="1"><u><a href="reply?id=9052608&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9052852" href="vote?for=9052852&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052852"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9052852">6 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Didn&#x27;t use any templates or frameworks (apart from font-awesome for icons and prism for syntax highlighting the code examples).<p>Just some good old fashioned hand written HTML + CSS.
<a href="https://github.com/joewalnes/websocketd/tree/gh-pages" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;joewalnes&#x2F;websocketd&#x2F;tree&#x2F;gh-pages</a></font></span><p><font size="1"><u><a href="reply?id=9052852&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051275" href="vote?for=9051275&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051275"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=keyle">keyle</a> <a href="item?id=9051275">21 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Oh my! I have been waiting for this, trying to write my own websocket server implementation in multiple esoteric languages! Fantastic!</font></span><p><font size="1"><u><a href="reply?id=9051275&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051787" href="vote?for=9051787&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051787"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=runewell">runewell</a> <a href="item?id=9051787">17 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">This is perfect for admin tools. I&#x27;d rather parse stdout strings than code a custom API.</font></span><p><font size="1"><u><a href="reply?id=9051787&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051040" href="vote?for=9051040&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051040"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=frknbasaran">frknbasaran</a> <a href="item?id=9051040">22 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I&#x27;ll try this. Looks good!</font></span><p><font size="1"><u><a href="reply?id=9051040&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051791" href="vote?for=9051791&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051791"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=hurin">hurin</a> <a href="item?id=9051791">17 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Could anyone give an example of what this is used for?</font></span><p><font size="1"><u><a href="reply?id=9051791&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9052839" href="vote?for=9052839&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052839"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9052839">6 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">It allows you to write a WebSocket end point, in any programming language, without having to deal with building socket servers, dealing with WebSocket protocol handshake&#x2F;parsing&#x2F;formatting&#x2F;etc, worrying about threading etc. Just write a script that reads and writes to stdin&#x2F;out.</font></span><p><font size="1"><u><a href="reply?id=9052839&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051860" href="vote?for=9051860&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051860"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=runewell">runewell</a> <a href="item?id=9051860">16 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">It appears to me that it is useful for eliminating the &quot;middle man&quot; scripts&#x2F;code often written for web application and server interaction. If I want to create a web application that displays the status of my server (CPU, memory, I&#x2F;O, etc) I can use this software to call vmstat directly instead of writing an API (PHP, Node.js, RoR, etc) that executes the same command or uses a library that requires even more code to get the exact same data.</font></span><p><font size="1"><u><a href="reply?id=9051860&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9051898" href="vote?for=9051898&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051898"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=hurin">hurin</a> <a href="item?id=9051898">15 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I&#x27;m sure this this is probably because I don&#x27;t have do this for work - but from that description it&#x27;s hard for me to tell what the advantages are. A script to feed vmstat (or other command data) with a python socket would be ~50 lines or so.</font></span><p><font size="1"><u><a href="reply?id=9051898&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051736" href="vote?for=9051736&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051736"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=spiralpolitik">spiralpolitik</a> <a href="item?id=9051736">17 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">I assume you are treating ` + "`" + `stdin` + "`" + ` and ` + "`" + `stdout` + "`" + ` as just a stream of bytes rather than trying to do anything clever a la Python 3 ?</font></span><p><font size="1"><u><a href="reply?id=9051736&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9052890" href="vote?for=9052890&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052890"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9052890">5 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Yep. The only magic thing is a line break (e.g. \n) is used to terminate each message.</font></span><p><font size="1"><u><a href="reply?id=9052890&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051743" href="vote?for=9051743&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051743"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=cypher543">cypher543</a> <a href="item?id=9051743">17 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">&gt; &quot;Write programs that do one thing and do it well.&quot;<p>So why does this WebSocket daemon also serve static files and CGI applications?</font></span><p><font size="1"><u><a href="reply?id=9051743&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9052146" href="vote?for=9052146&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052146"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=spoiler">spoiler</a> <a href="item?id=9052146">12 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Because you need to implement a tiny HTTP server for WebSockets anyway (if you want&#x27;t them to work from browsers). So, adding the ability to serve static files on top of that is trivial.<p>Not sure why they added CGI, though.</font></span><p><font size="1"><u><a href="reply?id=9052146&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9052848" href="vote?for=9052848&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052848"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9052848">6 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">That indeed was a dilemma. Although it focusses on doing one thing well, there were also a few core things that are useful to support a websocket based app - namely a place to serve the actual web content from (static) and the ability to use websocketd using vanilla http instead of websockets (cgi).</font></span><p><font size="1"><u><a href="reply?id=9052848&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051572" href="vote?for=9051572&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051572"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=dkarapetyan">dkarapetyan</a> <a href="item?id=9051572">19 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">This is cool. I can see this being used for prototyping and validating an idea before going full steam ahead with a more scalable framework.</font></span><p><font size="1"><u><a href="reply?id=9051572&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051750" href="vote?for=9051750&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051750"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=nichochar">nichochar</a> <a href="item?id=9051750">17 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Holy shit that&#x27;s cool</font></span><p><font size="1"><u><a href="reply?id=9051750&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051166" href="vote?for=9051166&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051166"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=angersock">angersock</a> <a href="item?id=9051166">21 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Oh, this is going to be so fun for doing terrible things.</font></span><p><font size="1"><u><a href="reply?id=9051166&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9051284" href="vote?for=9051284&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051284"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=asergeyev"><font color="#3c963c">asergeyev</font></a> <a href="item?id=9051284">21 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Untold rule is not to run &quot;sudo websocketd --devconsole bash&quot; :)</font></span><p><font size="1"><u><a href="reply?id=9051284&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="80"></td><td valign="top"><center><a id="up_9052101" href="vote?for=9052101&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052101"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=cturner">cturner</a> <a href="item?id=9052101">12 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">The browser will not implement terminal controls. You could get by though. This sort of scenario is why ed is never obsolete.</font></span><p><font size="1"><u><a href="reply?id=9052101&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="120"></td><td valign="top"><center><a id="up_9052885" href="vote?for=9052885&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052885"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9052885">5 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">ed is for the weak. Real developers edit bits using the magnetic forces of oceans.</font></span><p><font size="1"><u><a href="reply?id=9052885&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051862" href="vote?for=9051862&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051862"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=curiously">curiously</a> <a href="item?id=9051862">16 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">this is <i>fucking</i> cool. I got it instantly just glancing at the code example. I immediately understood how it worked. That is powerful stuff.<p>My only worry of course is, how would you scale this up? What&#x27;s really going beneath the hood.<p>I&#x27;m really excited and trying to think of something so I can use it as an excuse to use this.<p>The only other suggestion I would make is maybe change the name to something more catchy and brandable. Websocketd...okay like systemd...but I don&#x27;t know, something as good as this deserves a brandable name like Jupiter, or some Greek goddess or clever hacky name.</font></span><p><font size="1"><u><a href="reply?id=9051862&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="40"></td><td valign="top"><center><a id="up_9052830" href="vote?for=9052830&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9052830"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joewalnes">joewalnes</a> <a href="item?id=9052830">6 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Thanks. And I suck at naming stuff.</font></span><p><font size="1"><u><a href="reply?id=9052830&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr><tr><td><table border="0"><tr><td><img src="s.gif" height="1" width="0"></td><td valign="top"><center><a id="up_9051117" href="vote?for=9051117&amp;dir=up&amp;goto=item%3Fid%3D9050970"><div class="votearrow" title="upvote"></div></a><span id="down_9051117"></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=nubb">nubb</a> <a href="item?id=9051117">22 hours ago</a> <span class="deadmark"></span></span></div><br>
<span class="comment"><font color="#000000">Link is down =(</font></span><p><font size="1"><u><a href="reply?id=9051117&amp;goto=item%3Fid%3D9050970">reply</a></u></font></td></tr></table></td></tr></table><br><br>
</td></tr><tr><td><img src="s.gif" height="10" width="0"><table width="100%" cellspacing="0" cellpadding="1"><tr><td bgcolor="#ff6600"></td></tr></table><br>
<center><span class="yclinks"><a href="newsguidelines.html">Guidelines</a> | <a href="newsfaq.html">FAQ</a> | <a href="mailto:hn@ycombinator.com">Support</a> | <a href="lists">Lists</a> | <a href="bookmarklet.html">Bookmarklet</a> | <a href="dmca.html">DMCA</a> | <a href="http://www.ycombinator.com/">Y Combinator</a> | <a href="http://www.ycombinator.com/apply/">Apply</a> | <a href="mailto:hn@ycombinator.com">Contact</a></span><br><br>
<form method="get" action="//hn.algolia.com/">Search: <input type="text" name="q" value="" size="17"></form></center></td></tr></table></center></body></html>`

// vim: set nowrap :
